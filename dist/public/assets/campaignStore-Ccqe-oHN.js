import{c as f,a as T}from"./index-CQwUKZm9.js";import{j as v,X as b}from"./vendor-radix-C_vsl6Su.js";import{r as k}from"./vendor-react--0RGCJ5T.js";import{a as D}from"./vendor-utils-DlWX2jwD.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=D("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),x=k.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},r)=>{const n=a?b:"button";return v.jsx(n,{className:T(S({variant:t,size:s,className:e})),ref:r,...i})});x.displayName="Button";const u={"New Vehicle Purchase":[{id:"q1",type:"Rating",text:"How satisfied are you with your new vehicle purchase experience?",required:!0,order:1},{id:"q2",type:"Yes/No",text:"Would you recommend our dealership to friends and family?",required:!0,order:2},{id:"q3",type:"Text",text:"What could we have done better during your purchase process?",required:!1,order:3}],"Service Visit":[{id:"q1",type:"Rating",text:"How would you rate your recent service visit?",required:!0,order:1},{id:"q2",type:"Yes/No",text:"Was your vehicle ready on time?",required:!0,order:2},{id:"q3",type:"Text",text:"Please share any feedback about our service team.",required:!1,order:3}],"Parts Purchase":[{id:"q1",type:"Rating",text:"How satisfied are you with your parts purchase?",required:!0,order:1},{id:"q2",type:"Yes/No",text:"Did you find the parts you were looking for?",required:!0,order:2},{id:"q3",type:"Text",text:"How can we improve our parts department?",required:!1,order:3}],Financing:[{id:"q1",type:"Rating",text:"How would you rate your financing experience?",required:!0,order:1},{id:"q2",type:"Yes/No",text:"Were the financing terms clearly explained?",required:!0,order:2},{id:"q3",type:"Text",text:"Any suggestions to improve our financing process?",required:!1,order:3}],Leasing:[{id:"q1",type:"Rating",text:"How satisfied are you with your leasing experience?",required:!0,order:1},{id:"q2",type:"Yes/No",text:"Would you consider leasing from us again?",required:!0,order:2},{id:"q3",type:"Text",text:"What would make your leasing experience even better?",required:!1,order:3}]},o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function A(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}let l;const C=new Uint8Array(16);function R(){if(!l){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l=crypto.getRandomValues.bind(crypto)}return l(C)}const q=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),g={randomUUID:q};function N(e,t,s){var i;e=e||{};const a=e.random??((i=e.rng)==null?void 0:i.call(e))??R();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,A(a)}function c(e,t,s){return g.randomUUID&&!t&&!e?g.randomUUID():N(e)}const U={email:{subject:"We'd love your feedback!",body:"Dear {{customerName}}, thank you for choosing us. Please take a moment to share your experience."},sms:{body:"Hi {{customerName}}! Rate your experience: {{surveyLink}}"},whatsapp:{template:"Hello {{customerName}}, we value your opinion. Click here to share feedback: {{surveyLink}}"}},y={detractors:{createFidsparkDispute:!0,createLeadsparkTask:!1,createWebhookTask:!1,webhookUrl:"",webhookSecret:"",webhookPayloadTemplate:""},nonResponders:{createFidsparkDispute:!1,createLeadsparkTask:!1,createWebhookTask:!1},promoters:{notifyFidspark:!0},passives:{noAction:!0}},p={enabled:!0,startAfterHours:24,retryIntervalHours:4,callWindowFrom:"09:00",callWindowTo:"18:00",maxRetries:3,voiceType:"Female 1",personaScript:"Hello, this is Sarah from AutoHaus. I'm calling to follow up on your recent visit and gather your feedback.",triggerHumanFollowUpOnFailure:!0,triggerHumanFollowUpOnDissatisfaction:!0,triggerHumanFollowUpOnVerbalComplaint:!0},h=[{id:"fs1",order:1,actionType:"Send Email",delayDays:0,configuration:{}},{id:"fs2",order:2,actionType:"Send SMS",delayDays:2,configuration:{}},{id:"fs3",order:3,actionType:"Send AI Call",delayDays:5,configuration:{}}],P={npsScore:0,responseCount:0,responseRate:0,promotersPercent:0,passivesPercent:0,detractorsPercent:0,responseSources:{email:0,sms:0,aiCall:0},npsOverTime:[],aiAgentMetrics:{totalCalls:0,successfulCalls:0,unreachable:0,avgCallDuration:0,escalationReasons:[]},detractorTickets:[],detractorTasks:[]},H=()=>{const e=new Date,t=new Date(e.getTime()-30*24*60*60*1e3),s=new Date(e.getTime()-60*24*60*60*1e3),a=new Date(e.getTime()+24*60*60*1e3),i=new Date(e.getTime()-24*60*60*1e3),r=new Date(e.getTime()+30*24*60*60*1e3),n=new Date(e.getTime()+60*24*60*60*1e3);return[{id:c(),name:"AI Retry Only",description:"AI-driven retry campaign using only phone calls with external question source integration",language:"EN",serviceType:"New Vehicle Purchase",status:"Active",startDate:t,endDate:a,targetAudience:"Leads from external CRM system - retry candidates",triggerType:"Delayed",delayHours:24,dataSource:"External CRM - Lead Retry Queue",questionSourceType:"external",externalQuestionSourceUrl:"https://api.external-crm.com/survey-questions",surveyQuestions:u["New Vehicle Purchase"],followUpSteps:[{id:"fs-ai-retry",order:1,actionType:"Send AI Call",delayDays:0,configuration:{}}],messageTemplates:{email:{subject:"",body:""},sms:{body:""},whatsapp:{template:""}},outcomeRules:{detractors:{createFidsparkDispute:!1,createLeadsparkTask:!0,createWebhookTask:!1,webhookUrl:"",webhookSecret:"",webhookPayloadTemplate:""},nonResponders:{createFidsparkDispute:!1,createLeadsparkTask:!0,createWebhookTask:!1},promoters:{notifyFidspark:!1},passives:{noAction:!0}},aiAgentSettings:{enabled:!0,startAfterHours:2,retryIntervalHours:3,callWindowFrom:"09:00",callWindowTo:"20:00",maxRetries:5,voiceType:"Male 1",personaScript:"Hello, this is a follow-up call from our team regarding your recent inquiry.",triggerHumanFollowUpOnFailure:!0,triggerHumanFollowUpOnDissatisfaction:!1,triggerHumanFollowUpOnVerbalComplaint:!0},insights:{npsScore:71,responseCount:89,responseRate:56.2,promotersPercent:60,passivesPercent:24,detractorsPercent:16,responseSources:{email:0,sms:0,aiCall:89},npsOverTime:[{date:new Date(e.getTime()-21*24*60*60*1e3),score:68},{date:new Date(e.getTime()-14*24*60*60*1e3),score:70},{date:new Date(e.getTime()-7*24*60*60*1e3),score:72},{date:e,score:71}],aiAgentMetrics:{totalCalls:158,successfulCalls:97,unreachable:42,avgCallDuration:145,escalationReasons:[{reason:"Customer interested in demo",count:28},{reason:"Call back requested",count:15},{reason:"Escalation to sales team",count:9}]},detractorTickets:[],detractorTasks:[{id:"task1",customerName:"John Peters",taskDescription:"Follow up on negative AI call feedback",status:"Open",assignedTo:"Sales Team",priority:"High",createdAt:new Date(e.getTime()-2*24*60*60*1e3)},{id:"task2",customerName:"Sarah Miller",taskDescription:"Re-engage customer after failed contact",status:"In Progress",assignedTo:"Customer Success",priority:"Medium",createdAt:new Date(e.getTime()-4*24*60*60*1e3)},{id:"task3",customerName:"Robert Brown",taskDescription:"Schedule callback for dissatisfied customer",status:"Resolved",assignedTo:"Sales Team",priority:"High",createdAt:new Date(e.getTime()-6*24*60*60*1e3)}]},createdAt:t,updatedAt:e},{id:c(),name:"Q4 Customer Satisfaction Survey",description:"Annual customer satisfaction survey for all new vehicle purchases in Q4",language:"EN",serviceType:"New Vehicle Purchase",status:"Active",startDate:t,endDate:a,targetAudience:"New vehicle buyers in the last 30 days",triggerType:"Delayed",delayHours:48,dataSource:"CRM Database",questionSourceType:"manual",externalQuestionSourceUrl:"",surveyQuestions:u["New Vehicle Purchase"],followUpSteps:h,messageTemplates:U,outcomeRules:y,aiAgentSettings:p,insights:{npsScore:72,responseCount:245,responseRate:34.5,promotersPercent:58,passivesPercent:22,detractorsPercent:20,responseSources:{email:145,sms:62,aiCall:38},npsOverTime:[{date:new Date(e.getTime()-28*24*60*60*1e3),score:68},{date:new Date(e.getTime()-21*24*60*60*1e3),score:70},{date:new Date(e.getTime()-14*24*60*60*1e3),score:69},{date:new Date(e.getTime()-7*24*60*60*1e3),score:74},{date:e,score:72}],aiAgentMetrics:{totalCalls:156,successfulCalls:124,unreachable:32,avgCallDuration:180,escalationReasons:[{reason:"Customer dissatisfaction",count:12},{reason:"Technical issue",count:5},{reason:"Verbal complaint",count:8}]},detractorTickets:[{id:"dt1",customerName:"Michael Schmidt",issue:"Long wait times at service desk",status:"In Progress",actionTaken:"Manager follow-up scheduled",createdAt:new Date(e.getTime()-3*24*60*60*1e3)},{id:"dt2",customerName:"Emma Weber",issue:"Vehicle delivery delayed",status:"Resolved",actionTaken:"Compensation offered and accepted",createdAt:new Date(e.getTime()-7*24*60*60*1e3)},{id:"dt3",customerName:"Thomas Müller",issue:"Unsatisfied with financing terms",status:"Open",actionTaken:"Pending review",createdAt:new Date(e.getTime()-1*24*60*60*1e3)}],detractorTasks:[]},createdAt:s,updatedAt:e},{id:c(),name:"Service Excellence Feedback - DE",description:"Ongoing service visit feedback collection for German-speaking customers",language:"DE",serviceType:"Service Visit",status:"Completed",startDate:s,endDate:i,targetAudience:"Service center visitors - German speakers",triggerType:"Immediate",delayHours:0,dataSource:"Service Appointments System",questionSourceType:"manual",externalQuestionSourceUrl:"",surveyQuestions:u["Service Visit"],followUpSteps:[{id:"fs1",order:1,actionType:"Send Email",delayDays:0,configuration:{}},{id:"fs2",order:2,actionType:"Send SMS",delayDays:1,configuration:{}}],messageTemplates:{email:{subject:"Ihre Meinung ist uns wichtig!",body:"Sehr geehrte/r {{customerName}}, vielen Dank für Ihren Besuch."},sms:{body:"Hallo {{customerName}}! Bewerten Sie Ihren Besuch: {{surveyLink}}"},whatsapp:{template:"Hallo {{customerName}}, Ihr Feedback ist uns wichtig: {{surveyLink}}"}},outcomeRules:{detractors:{createFidsparkDispute:!1,createLeadsparkTask:!1,createWebhookTask:!0,webhookUrl:"https://api.external-system.de/feedback",webhookSecret:"sk_live_xxx",webhookPayloadTemplate:'{"customer": "{{customerName}}", "score": "{{npsScore}}"}'},nonResponders:{createFidsparkDispute:!1,createLeadsparkTask:!1,createWebhookTask:!0},promoters:{notifyFidspark:!0},passives:{noAction:!0}},aiAgentSettings:{...p,enabled:!1},insights:{npsScore:68,responseCount:412,responseRate:41.2,promotersPercent:52,passivesPercent:28,detractorsPercent:20,responseSources:{email:298,sms:114,aiCall:0},npsOverTime:[{date:new Date(e.getTime()-56*24*60*60*1e3),score:65},{date:new Date(e.getTime()-42*24*60*60*1e3),score:66},{date:new Date(e.getTime()-28*24*60*60*1e3),score:69},{date:new Date(e.getTime()-14*24*60*60*1e3),score:68},{date:i,score:68}],aiAgentMetrics:{totalCalls:0,successfulCalls:0,unreachable:0,avgCallDuration:0,escalationReasons:[]},detractorTickets:[],detractorTasks:[]},createdAt:s,updatedAt:i},{id:c(),name:"Leasing Experience Survey - AR",description:"New leasing customer feedback campaign for Arabic-speaking market",language:"AR",serviceType:"Leasing",status:"Draft",startDate:r,endDate:n,targetAudience:"New leasing customers - Arabic speakers",triggerType:"Delayed",delayHours:72,dataSource:"Leasing Management System",questionSourceType:"manual",externalQuestionSourceUrl:"",surveyQuestions:u.Leasing,followUpSteps:h,messageTemplates:{email:{subject:"نحن نقدر رأيك!",body:"عزيزي {{customerName}}، شكراً لاختيارك لنا."},sms:{body:"مرحباً {{customerName}}! قيم تجربتك: {{surveyLink}}"},whatsapp:{template:"مرحباً {{customerName}}، رأيك مهم لنا: {{surveyLink}}"}},outcomeRules:y,aiAgentSettings:{...p,voiceType:"Male 1"},insights:{...P},createdAt:e,updatedAt:e}]},w="nps_campaigns",m=()=>{const e=localStorage.getItem(w),t=H();if(e)try{const a=JSON.parse(e).map(r=>({...r,questionSourceType:r.questionSourceType||"manual",externalQuestionSourceUrl:r.externalQuestionSourceUrl||"",startDate:new Date(r.startDate),endDate:new Date(r.endDate),createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt),insights:{...r.insights,npsOverTime:r.insights.npsOverTime.map(n=>({...n,date:new Date(n.date)})),detractorTickets:r.insights.detractorTickets.map(n=>({...n,createdAt:new Date(n.createdAt)})),detractorTasks:(r.insights.detractorTasks||[]).map(n=>({...n,createdAt:new Date(n.createdAt)}))}})),i=t.filter(r=>!a.some(n=>n.name===r.name));if(i.length>0){const r=[...a,...i];return d(r),r}return a}catch{return t}return d(t),t},d=e=>{localStorage.setItem(w,JSON.stringify(e))},E=e=>m().find(s=>s.id===e),V=e=>{const t=m(),s={...e,id:c(),createdAt:new Date,updatedAt:new Date};return t.push(s),d(t),s},W=(e,t)=>{const s=m(),a=s.findIndex(i=>i.id===e);if(a!==-1)return s[a]={...s[a],...t,updatedAt:new Date},d(s),s[a]},Q=e=>e>=70?"text-[#E64A19]":e>=50?"text-amber-600":"text-red-600";export{x as B,u as D,O as P,m as a,E as b,V as c,Q as g,W as u,c as v};
